[ema@testlab:atelier-02] $ vagrant up
Bringing machine 'ansible' up with 'virtualbox' provider...
Bringing machine 'rocky' up with 'virtualbox' provider...
Bringing machine 'debian' up with 'virtualbox' provider...
Bringing machine 'suse' up with 'virtualbox' provider...
==> ansible: Importing base box 'generic/rocky9'...
==> ansible: Matching MAC address for NAT networking...
==> ansible: Checking if box 'generic/rocky9' version '4.3.12' is up to date...
==> ansible: Setting the name of the VM: atelier-02_ansible_1742804937405_20560
==> ansible: Clearing any previously set network interfaces...
==> ansible: Preparing network interfaces based on configuration...
    ansible: Adapter 1: nat
    ansible: Adapter 2: hostonly
==> ansible: Forwarding ports...
    ansible: 22 (guest) => 2222 (host) (adapter 1)
==> ansible: Running 'pre-boot' VM customizations...
==> ansible: Booting VM...
==> ansible: Waiting for machine to boot. This may take a few minutes...
    ansible: SSH address: 127.0.0.1:2222
    ansible: SSH username: vagrant
    ansible: SSH auth method: private key
    ansible: 
    ansible: Vagrant insecure key detected. Vagrant will automatically replace
    ansible: this with a newly generated keypair for better security.
    ansible: 
    ansible: Inserting generated public key within guest...
    ansible: Removing insecure key from the guest if it's present...
    ansible: Key inserted! Disconnecting and reconnecting using new SSH key...
==> ansible: Machine booted and ready!
==> ansible: Setting hostname...
==> ansible: Configuring and enabling network interfaces...
==> ansible: Mounting shared folders...
    ansible: /home/ema/formation-ansible/atelier-02 => /vagrant
==> ansible: Running provisioner: shell...
    ansible: Running: /tmp/vagrant-shell20250324-6504-252d6k.sh
    ansible: Extra Packages for Enterprise Linux 9 - x86_64  4.0 MB/s |  23 MB     00:05
    ansible: Extra Packages for Enterprise Linux 9 openh264  1.7 kB/s | 2.5 kB     00:01
    ansible: Rocky Linux 9 - BaseOS                          1.4 MB/s | 2.3 MB     00:01
    ansible: Rocky Linux 9 - AppStream                       3.8 MB/s | 8.6 MB     00:02
    ansible: Rocky Linux 9 - Extras                           17 kB/s |  16 kB     00:00
    ansible: Package epel-release-9-7.el9.noarch is already installed.
    ansible: Dependencies resolved.
    ansible: ================================================================================
    ansible:  Package                Architecture     Version           Repository      Size
    ansible: ================================================================================
    ansible: Upgrading:
    ansible:  epel-release           noarch           9-9.el9           epel            19 k
    ansible: 
    ansible: Transaction Summary
    ansible: ================================================================================
    ansible: Upgrade  1 Package
    ansible: 
    ansible: Total download size: 19 k
    ansible: Downloading Packages:
    ansible: epel-release-9-9.el9.noarch.rpm                  77 kB/s |  19 kB     00:00
    ansible: --------------------------------------------------------------------------------
    ansible: Total                                            22 kB/s |  19 kB     00:00
    ansible: Running transaction check
    ansible: Transaction check succeeded.
    ansible: Running transaction test
    ansible: Transaction test succeeded.
    ansible: Running transaction
    ansible:   Preparing        :                                                        1/1
    ansible:   Upgrading        : epel-release-9-9.el9.noarch                            1/2
    ansible: warning: /etc/yum.repos.d/epel-testing.repo created as /etc/yum.repos.d/epel-testing.repo.rpmnew
    ansible: warning: /etc/yum.repos.d/epel.repo created as /etc/yum.repos.d/epel.repo.rpmnew
    ansible: 
    ansible:   Running scriptlet: epel-release-9-9.el9.noarch                            1/2
    ansible:   Cleanup          : epel-release-9-7.el9.noarch                            2/2
    ansible:   Running scriptlet: epel-release-9-7.el9.noarch                            2/2
    ansible:   Verifying        : epel-release-9-9.el9.noarch                            1/2
    ansible:   Verifying        : epel-release-9-7.el9.noarch                            2/2
    ansible: 
    ansible: Upgraded:
    ansible:   epel-release-9-9.el9.noarch
    ansible: 
    ansible: Complete!
    ansible: Last metadata expiration check: 0:00:05 ago on Mon 24 Mar 2025 08:29:45 AM UTC.
    ansible: Package vim-enhanced-2:8.2.2637-20.el9_1.x86_64 is already installed.
    ansible: Dependencies resolved.
    ansible: ================================================================================
    ansible:  Package                  Arch       Version                Repository     Size
    ansible: ================================================================================
    ansible: Installing:
    ansible:  ansible                  noarch     1:7.7.0-1.el9          epel           34 M
    ansible:  nano                     x86_64     5.6.1-6.el9            baseos        691 k
    ansible: Upgrading:
    ansible:  vim-common               x86_64     2:8.2.2637-21.el9      appstream     6.6 M
    ansible:  vim-enhanced             x86_64     2:8.2.2637-21.el9      appstream     1.7 M
    ansible: Installing dependencies:
    ansible:  ansible-core             x86_64     1:2.14.17-1.el9        appstream     2.2 M
    ansible:  git-core                 x86_64     2.43.5-2.el9_5         appstream     4.4 M
    ansible:  python3-cffi             x86_64     1.14.5-5.el9           baseos        241 k
    ansible:  python3-cryptography     x86_64     36.0.1-4.el9           baseos        1.2 M
    ansible:  python3-packaging        noarch     20.9-5.el9             appstream      69 k
    ansible:  python3-ply              noarch     3.11-14.el9.0.1        baseos        103 k
    ansible:  python3-pycparser        noarch     2.20-6.el9             baseos        124 k
    ansible:  python3-pyyaml           x86_64     5.4.1-6.el9            baseos        191 k
    ansible:  python3-resolvelib       noarch     0.5.4-5.el9            appstream      29 k
    ansible:  python3-setuptools       noarch     53.0.0-13.el9          baseos        838 k
    ansible:  sshpass                  x86_64     1.09-4.el9             appstream      27 k
    ansible: 
    ansible: Transaction Summary
    ansible: ================================================================================
    ansible: Install  13 Packages
    ansible: Upgrade   2 Packages
    ansible: 
    ansible: Total download size: 53 M
    ansible: Downloading Packages:
    ansible: (1/15): python3-pyyaml-5.4.1-6.el9.x86_64.rpm   426 kB/s | 191 kB     00:00
    ansible: (2/15): python3-setuptools-53.0.0-13.el9.noarch 1.4 MB/s | 838 kB     00:00
    ansible: (3/15): nano-5.6.1-6.el9.x86_64.rpm             1.5 MB/s | 691 kB     00:00
    ansible: (4/15): python3-cryptography-36.0.1-4.el9.x86_6 2.6 MB/s | 1.2 MB     00:00
    ansible: (5/15): python3-cffi-1.14.5-5.el9.x86_64.rpm    1.6 MB/s | 241 kB     00:00
    ansible: (6/15): python3-ply-3.11-14.el9.0.1.noarch.rpm  1.3 MB/s | 103 kB     00:00
    ansible: (7/15): python3-pycparser-2.20-6.el9.noarch.rpm 1.3 MB/s | 124 kB     00:00
    ansible: (8/15): python3-resolvelib-0.5.4-5.el9.noarch.r  46 kB/s |  29 kB     00:00
    ansible: (9/15): python3-packaging-20.9-5.el9.noarch.rpm  92 kB/s |  69 kB     00:00
    ansible: (10/15): sshpass-1.09-4.el9.x86_64.rpm          231 kB/s |  27 kB     00:00
    ansible: (11/15): ansible-core-2.14.17-1.el9.x86_64.rpm  1.2 MB/s | 2.2 MB     00:01
    ansible: (12/15): ansible-7.7.0-1.el9.noarch.rpm         7.0 MB/s |  34 MB     00:04
    ansible: (13/15): vim-enhanced-8.2.2637-21.el9.x86_64.rp 1.5 MB/s | 1.7 MB     00:01
    ansible: (14/15): git-core-2.43.5-2.el9_5.x86_64.rpm     1.4 MB/s | 4.4 MB     00:03
    ansible: (15/15): vim-common-8.2.2637-21.el9.x86_64.rpm  5.3 MB/s | 6.6 MB     00:01
    ansible: --------------------------------------------------------------------------------
    ansible: Total                                           7.0 MB/s |  53 MB     00:07
    ansible: Running transaction check
    ansible: Transaction check succeeded.
    ansible: Running transaction test
    ansible: Transaction test succeeded.
    ansible: Running transaction
    ansible:   Preparing        :                                                        1/1
    ansible:   Upgrading        : vim-common-2:8.2.2637-21.el9.x86_64                   1/17
    ansible:   Installing       : git-core-2.43.5-2.el9_5.x86_64                        2/17
    ansible:   Installing       : sshpass-1.09-4.el9.x86_64                             3/17
    ansible:   Installing       : python3-resolvelib-0.5.4-5.el9.noarch                 4/17
    ansible:   Installing       : python3-packaging-20.9-5.el9.noarch                   5/17
    ansible:   Installing       : python3-ply-3.11-14.el9.0.1.noarch                    6/17
    ansible:   Installing       : python3-pycparser-2.20-6.el9.noarch                   7/17
    ansible:   Installing       : python3-cffi-1.14.5-5.el9.x86_64                      8/17
    ansible:   Installing       : python3-cryptography-36.0.1-4.el9.x86_64              9/17
    ansible:   Installing       : python3-setuptools-53.0.0-13.el9.noarch              10/17
    ansible:   Installing       : python3-pyyaml-5.4.1-6.el9.x86_64                    11/17
    ansible:   Installing       : ansible-core-1:2.14.17-1.el9.x86_64                  12/17
    ansible:   Installing       : ansible-1:7.7.0-1.el9.noarch                         13/17
    ansible:   Upgrading        : vim-enhanced-2:8.2.2637-21.el9.x86_64                14/17
    ansible:   Installing       : nano-5.6.1-6.el9.x86_64                              15/17
    ansible:   Cleanup          : vim-enhanced-2:8.2.2637-20.el9_1.x86_64              16/17
    ansible:   Cleanup          : vim-common-2:8.2.2637-20.el9_1.x86_64                17/17
    ansible:   Running scriptlet: vim-common-2:8.2.2637-20.el9_1.x86_64                17/17
    ansible:   Verifying        : ansible-1:7.7.0-1.el9.noarch                          1/17
    ansible:   Verifying        : python3-pyyaml-5.4.1-6.el9.x86_64                     2/17
    ansible:   Verifying        : python3-setuptools-53.0.0-13.el9.noarch               3/17
    ansible:   Verifying        : nano-5.6.1-6.el9.x86_64                               4/17
    ansible:   Verifying        : python3-cryptography-36.0.1-4.el9.x86_64              5/17
    ansible:   Verifying        : python3-cffi-1.14.5-5.el9.x86_64                      6/17
    ansible:   Verifying        : python3-ply-3.11-14.el9.0.1.noarch                    7/17
    ansible:   Verifying        : python3-pycparser-2.20-6.el9.noarch                   8/17
    ansible:   Verifying        : python3-packaging-20.9-5.el9.noarch                   9/17
    ansible:   Verifying        : python3-resolvelib-0.5.4-5.el9.noarch                10/17
    ansible:   Verifying        : sshpass-1.09-4.el9.x86_64                            11/17
    ansible:   Verifying        : git-core-2.43.5-2.el9_5.x86_64                       12/17
    ansible:   Verifying        : ansible-core-1:2.14.17-1.el9.x86_64                  13/17
    ansible:   Verifying        : vim-enhanced-2:8.2.2637-21.el9.x86_64                14/17
    ansible:   Verifying        : vim-enhanced-2:8.2.2637-20.el9_1.x86_64              15/17
    ansible:   Verifying        : vim-common-2:8.2.2637-21.el9.x86_64                  16/17
    ansible:   Verifying        : vim-common-2:8.2.2637-20.el9_1.x86_64                17/17
    ansible: 
    ansible: Upgraded:
    ansible:   vim-common-2:8.2.2637-21.el9.x86_64   vim-enhanced-2:8.2.2637-21.el9.x86_64
    ansible: Installed:
    ansible:   ansible-1:7.7.0-1.el9.noarch
    ansible:   ansible-core-1:2.14.17-1.el9.x86_64
    ansible:   git-core-2.43.5-2.el9_5.x86_64
    ansible:   nano-5.6.1-6.el9.x86_64
    ansible:   python3-cffi-1.14.5-5.el9.x86_64
    ansible:   python3-cryptography-36.0.1-4.el9.x86_64
    ansible:   python3-packaging-20.9-5.el9.noarch
    ansible:   python3-ply-3.11-14.el9.0.1.noarch
    ansible:   python3-pycparser-2.20-6.el9.noarch
    ansible:   python3-pyyaml-5.4.1-6.el9.x86_64
    ansible:   python3-resolvelib-0.5.4-5.el9.noarch
    ansible:   python3-setuptools-53.0.0-13.el9.noarch
    ansible:   sshpass-1.09-4.el9.x86_64
    ansible: 
    ansible: Complete!
==> rocky: Importing base box 'generic/rocky9'...
==> rocky: Matching MAC address for NAT networking...
==> rocky: Checking if box 'generic/rocky9' version '4.3.12' is up to date...
==> rocky: Setting the name of the VM: atelier-02_rocky_1742805032705_65572
==> rocky: Fixed port collision for 22 => 2222. Now on port 2200.
==> rocky: Clearing any previously set network interfaces...
==> rocky: Preparing network interfaces based on configuration...
    rocky: Adapter 1: nat
    rocky: Adapter 2: hostonly
==> rocky: Forwarding ports...
    rocky: 22 (guest) => 2200 (host) (adapter 1)
==> rocky: Running 'pre-boot' VM customizations...
==> rocky: Booting VM...
==> rocky: Waiting for machine to boot. This may take a few minutes...
    rocky: SSH address: 127.0.0.1:2200
    rocky: SSH username: vagrant
    rocky: SSH auth method: private key
    rocky: 
    rocky: Vagrant insecure key detected. Vagrant will automatically replace
    rocky: this with a newly generated keypair for better security.
    rocky: 
    rocky: Inserting generated public key within guest...
    rocky: Removing insecure key from the guest if it's present...
    rocky: Key inserted! Disconnecting and reconnecting using new SSH key...
==> rocky: Machine booted and ready!
==> rocky: Setting hostname...
==> rocky: Configuring and enabling network interfaces...
==> rocky: Mounting shared folders...
    rocky: /home/ema/formation-ansible/atelier-02 => /vagrant
==> rocky: Running provisioner: shell...
    rocky: Running: /tmp/vagrant-shell20250324-6504-yw1tr0.sh
    rocky: Dependencies resolved.
    rocky: ================================================================================
    rocky:  Package               Architecture    Version           Repository        Size
    rocky: ================================================================================
    rocky: Removing:
    rocky:  epel-release          noarch          9-7.el9           @extras           26 k
    rocky: 
    rocky: Transaction Summary
    rocky: ================================================================================
    rocky: Remove  1 Package
    rocky: 
    rocky: Freed space: 26 k
    rocky: Running transaction check
    rocky: Transaction check succeeded.
    rocky: Running transaction test
    rocky: Transaction test succeeded.
    rocky: Running transaction
    rocky:   Preparing        :                                                        1/1
    rocky:   Erasing          : epel-release-9-7.el9.noarch                            1/1
    rocky: warning: /etc/yum.repos.d/epel.repo saved as /etc/yum.repos.d/epel.repo.rpmsave
    rocky: warning: /etc/yum.repos.d/epel-testing.repo saved as /etc/yum.repos.d/epel-testing.repo.rpmsave
    rocky: 
    rocky:   Verifying        : epel-release-9-7.el9.noarch                            1/1
    rocky: 
    rocky: Removed:
    rocky:   epel-release-9-7.el9.noarch
    rocky: 
    rocky: Complete!
==> debian: Importing base box 'generic/debian12'...
==> debian: Matching MAC address for NAT networking...
==> debian: Checking if box 'generic/debian12' version '4.3.12' is up to date...
==> debian: Setting the name of the VM: atelier-02_debian_1742805083706_41039
==> debian: Fixed port collision for 22 => 2222. Now on port 2201.
==> debian: Clearing any previously set network interfaces...
==> debian: Preparing network interfaces based on configuration...
[ema@testlab:atelier-03] $ vagrant up
Bringing machine 'control' up with 'virtualbox' provider...
Bringing machine 'target01' up with 'virtualbox' provider...
Bringing machine 'target02' up with 'virtualbox' provider...
Bringing machine 'target03' up with 'virtualbox' provider...
==> control: Importing base box 'bento/ubuntu-22.04'...
==> control: Matching MAC address for NAT networking...
==> control: Checking if box 'bento/ubuntu-22.04' version '202502.21.0' is up to date...
==> control: Setting the name of the VM: atelier-03_control_1742805516517_83238
==> control: Clearing any previously set network interfaces...
==> control: Preparing network interfaces based on configuration...
    control: Adapter 1: nat
    control: Adapter 2: hostonly
==> control: Forwarding ports...
    control: 22 (guest) => 2222 (host) (adapter 1)
==> control: Running 'pre-boot' VM customizations...
==> control: Booting VM...
==> control: Waiting for machine to boot. This may take a few minutes...
    control: SSH address: 127.0.0.1:2222
    control: SSH username: vagrant
    control: SSH auth method: private key
    control: 
    control: Vagrant insecure key detected. Vagrant will automatically replace
    control: this with a newly generated keypair for better security.
    control: 
    control: Inserting generated public key within guest...
    control: Removing insecure key from the guest if it's present...
    control: Key inserted! Disconnecting and reconnecting using new SSH key...
==> control: Machine booted and ready!
==> control: Setting hostname...
==> control: Configuring and enabling network interfaces...
==> control: Mounting shared folders...
    control: /home/ema/formation-ansible/atelier-03 => /vagrant
==> control: Running provisioner: shell...
    control: Running: /tmp/vagrant-shell20250324-22655-7gse6b.sh
    control: Hit:1 http://us.archive.ubuntu.com/ubuntu jammy InRelease
    control: Get:2 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB]
    control: Get:3 http://us.archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB]
    control: Get:4 http://us.archive.ubuntu.com/ubuntu jammy-backports InRelease [127 kB]
    control: Get:5 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [2,145 kB]
    control: Get:6 http://us.archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [2,390 kB]
    control: Get:7 http://security.ubuntu.com/ubuntu jammy-security/main Translation-en [333 kB]
    control: Get:8 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [2,986 kB]
    control: Get:9 http://us.archive.ubuntu.com/ubuntu jammy-updates/main Translation-en [396 kB]
    control: Get:10 http://us.archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [3,114 kB]
    control: Get:11 http://security.ubuntu.com/ubuntu jammy-security/restricted Translation-en [527 kB]
    control: Get:12 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [967 kB]
    control: Get:13 http://security.ubuntu.com/ubuntu jammy-security/universe Translation-en [207 kB]
    control: Get:14 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [46.6 kB]
    control: Get:15 http://security.ubuntu.com/ubuntu jammy-security/multiverse Translation-en [10.7 kB]
    control: Get:16 http://us.archive.ubuntu.com/ubuntu jammy-updates/restricted Translation-en [548 kB]
    control: Get:17 http://us.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1,194 kB]
    control: Get:18 http://us.archive.ubuntu.com/ubuntu jammy-updates/universe Translation-en [294 kB]
    control: Get:19 http://us.archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [53.3 kB]
    control: Get:20 http://us.archive.ubuntu.com/ubuntu jammy-updates/multiverse Translation-en [13.6 kB]
    control: Get:21 http://us.archive.ubuntu.com/ubuntu jammy-backports/main amd64 Packages [68.4 kB]
    control: Get:22 http://us.archive.ubuntu.com/ubuntu jammy-backports/main Translation-en [11.1 kB]
    control: Get:23 http://us.archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [30.1 kB]
    control: Get:24 http://us.archive.ubuntu.com/ubuntu jammy-backports/universe Translation-en [16.6 kB]
    control: Fetched 15.7 MB in 3s (5,737 kB/s)
    control: Reading package lists...
    control: Reading package lists...
    control: Building dependency tree...
    control: Reading state information...
    control: The following additional packages will be installed:
    control:   ieee-data python3-argcomplete python3-dnspython python3-jmespath
    control:   python3-kerberos python3-libcloud python3-lockfile python3-netaddr
    control:   python3-ntlm-auth python3-pycryptodome python3-requests-kerberos
    control:   python3-requests-ntlm python3-requests-toolbelt python3-selinux
    control:   python3-simplejson python3-winrm python3-xmltodict
    control: Suggested packages:
    control:   cowsay sshpass python3-sniffio python3-trio python-lockfile-doc ipython3
    control:   python-netaddr-docs
    control: The following NEW packages will be installed:
    control:   ansible ieee-data python3-argcomplete python3-dnspython python3-jmespath
    control:   python3-kerberos python3-libcloud python3-lockfile python3-netaddr
    control:   python3-ntlm-auth python3-pycryptodome python3-requests-kerberos
    control:   python3-requests-ntlm python3-requests-toolbelt python3-selinux
    control:   python3-simplejson python3-winrm python3-xmltodict
    control: 0 upgraded, 18 newly installed, 0 to remove and 43 not upgraded.
    control: Need to get 22.8 MB of archives.
    control: After this operation, 243 MB of additional disk space will be used.
    control: Get:1 http://us.archive.ubuntu.com/ubuntu jammy-updates/main amd64 python3-pycryptodome amd64 3.11.0+dfsg1-3ubuntu0.1 [1,029 kB]
    control: Get:2 http://us.archive.ubuntu.com/ubuntu jammy/main amd64 python3-dnspython all 2.1.0-1ubuntu1 [123 kB]
    control: Get:3 http://us.archive.ubuntu.com/ubuntu jammy/main amd64 ieee-data all 20210605.1 [1,887 kB]
    control: Get:4 http://us.archive.ubuntu.com/ubuntu jammy/main amd64 python3-netaddr all 0.8.0-2 [309 kB]
    control: Get:5 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 ansible all 2.10.7+merged+base+2.10.8+dfsg-1 [17.5 MB]
    control: Get:6 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-argcomplete all 1.8.1-1.5 [27.2 kB]
    control: Get:7 http://us.archive.ubuntu.com/ubuntu jammy/main amd64 python3-jmespath all 0.10.0-1 [21.7 kB]
    control: Get:8 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-kerberos amd64 1.1.14-3.1build5 [23.0 kB]
    control: Get:9 http://us.archive.ubuntu.com/ubuntu jammy/main amd64 python3-lockfile all 1:0.12.2-2.2 [14.6 kB]
    control: Get:10 http://us.archive.ubuntu.com/ubuntu jammy/main amd64 python3-simplejson amd64 3.17.6-1build1 [54.7 kB]
    control: Get:11 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-libcloud all 3.2.0-2 [1,554 kB]
    control: Get:12 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-ntlm-auth all 1.4.0-1 [20.4 kB]
    control: Get:13 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-requests-kerberos all 0.12.0-2 [11.9 kB]
    control: Get:14 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-requests-ntlm all 1.1.0-1.1 [6,160 B]
    control: Get:15 http://us.archive.ubuntu.com/ubuntu jammy/main amd64 python3-requests-toolbelt all 0.9.1-1 [38.0 kB]
    control: Get:16 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-selinux amd64 3.3-1build2 [159 kB]
    control: Get:17 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-xmltodict all 0.12.0-2 [12.6 kB]
    control: Get:18 http://us.archive.ubuntu.com/ubuntu jammy/universe amd64 python3-winrm all 0.3.0-2 [21.7 kB]
    control: dpkg-preconfigure: unable to re-open stdin: No such file or directory
    control: Fetched 22.8 MB in 3s (7,126 kB/s)
    control: Selecting previously unselected package python3-pycryptodome.
(Reading database ... 45118 files and directories currently installed.)
    control: Preparing to unpack .../00-python3-pycryptodome_3.11.0+dfsg1-3ubuntu0.1_amd64.deb ...
    control: Unpacking python3-pycryptodome (3.11.0+dfsg1-3ubuntu0.1) ...
    control: Selecting previously unselected package python3-dnspython.
    control: Preparing to unpack .../01-python3-dnspython_2.1.0-1ubuntu1_all.deb ...
    control: Unpacking python3-dnspython (2.1.0-1ubuntu1) ...
    control: Selecting previously unselected package ieee-data.
    control: Preparing to unpack .../02-ieee-data_20210605.1_all.deb ...
    control: Unpacking ieee-data (20210605.1) ...
    control: Selecting previously unselected package python3-netaddr.
    control: Preparing to unpack .../03-python3-netaddr_0.8.0-2_all.deb ...
    control: Unpacking python3-netaddr (0.8.0-2) ...
    control: Selecting previously unselected package ansible.
    control: Preparing to unpack .../04-ansible_2.10.7+merged+base+2.10.8+dfsg-1_all.deb ...
    control: Unpacking ansible (2.10.7+merged+base+2.10.8+dfsg-1) ...
    control: Selecting previously unselected package python3-argcomplete.
    control: Preparing to unpack .../05-python3-argcomplete_1.8.1-1.5_all.deb ...
    control: Unpacking python3-argcomplete (1.8.1-1.5) ...
    control: Selecting previously unselected package python3-jmespath.
    control: Preparing to unpack .../06-python3-jmespath_0.10.0-1_all.deb ...
    control: Unpacking python3-jmespath (0.10.0-1) ...
    control: Selecting previously unselected package python3-kerberos.
    control: Preparing to unpack .../07-python3-kerberos_1.1.14-3.1build5_amd64.deb ...
    control: Unpacking python3-kerberos (1.1.14-3.1build5) ...
    control: Selecting previously unselected package python3-lockfile.
    control: Preparing to unpack .../08-python3-lockfile_1%3a0.12.2-2.2_all.deb ...
    control: Unpacking python3-lockfile (1:0.12.2-2.2) ...
    control: Selecting previously unselected package python3-simplejson.
    control: Preparing to unpack .../09-python3-simplejson_3.17.6-1build1_amd64.deb ...
    control: Unpacking python3-simplejson (3.17.6-1build1) ...
    control: Selecting previously unselected package python3-libcloud.
    control: Preparing to unpack .../10-python3-libcloud_3.2.0-2_all.deb ...
    control: Unpacking python3-libcloud (3.2.0-2) ...
    control: Selecting previously unselected package python3-ntlm-auth.
    control: Preparing to unpack .../11-python3-ntlm-auth_1.4.0-1_all.deb ...
    control: Unpacking python3-ntlm-auth (1.4.0-1) ...
    control: Selecting previously unselected package python3-requests-kerberos.
    control: Preparing to unpack .../12-python3-requests-kerberos_0.12.0-2_all.deb ...
    control: Unpacking python3-requests-kerberos (0.12.0-2) ...
    control: Selecting previously unselected package python3-requests-ntlm.
    control: Preparing to unpack .../13-python3-requests-ntlm_1.1.0-1.1_all.deb ...
    control: Unpacking python3-requests-ntlm (1.1.0-1.1) ...
    control: Selecting previously unselected package python3-requests-toolbelt.
    control: Preparing to unpack .../14-python3-requests-toolbelt_0.9.1-1_all.deb ...
    control: Unpacking python3-requests-toolbelt (0.9.1-1) ...
    control: Selecting previously unselected package python3-selinux.
    control: Preparing to unpack .../15-python3-selinux_3.3-1build2_amd64.deb ...
    control: Unpacking python3-selinux (3.3-1build2) ...
    control: Selecting previously unselected package python3-xmltodict.
    control: Preparing to unpack .../16-python3-xmltodict_0.12.0-2_all.deb ...
    control: Unpacking python3-xmltodict (0.12.0-2) ...
    control: Selecting previously unselected package python3-winrm.
    control: Preparing to unpack .../17-python3-winrm_0.3.0-2_all.deb ...
    control: Unpacking python3-winrm (0.3.0-2) ...
    control: Setting up python3-lockfile (1:0.12.2-2.2) ...
    control: Setting up python3-requests-toolbelt (0.9.1-1) ...
    control: Setting up python3-ntlm-auth (1.4.0-1) ...
    control: Setting up python3-pycryptodome (3.11.0+dfsg1-3ubuntu0.1) ...
    control: Setting up python3-kerberos (1.1.14-3.1build5) ...
    control: Setting up python3-simplejson (3.17.6-1build1) ...
    control: Setting up python3-xmltodict (0.12.0-2) ...
    control: Setting up python3-jmespath (0.10.0-1) ...
    control: Setting up python3-requests-kerberos (0.12.0-2) ...
    control: Setting up ieee-data (20210605.1) ...
    control: Setting up python3-dnspython (2.1.0-1ubuntu1) ...
    control: Setting up python3-selinux (3.3-1build2) ...
    control: Setting up python3-argcomplete (1.8.1-1.5) ...
    control: Setting up python3-requests-ntlm (1.1.0-1.1) ...
    control: Setting up python3-libcloud (3.2.0-2) ...
    control: Setting up python3-netaddr (0.8.0-2) ...
    control: Setting up python3-winrm (0.3.0-2) ...
    control: Setting up ansible (2.10.7+merged+base+2.10.8+dfsg-1) ...
    control: Processing triggers for man-db (2.10.2-1) ...
    control: 
    control: Running kernel seems to be up-to-date.
    control: 
    control: No services need to be restarted.
    control: 
    control: No containers need to be restarted.
    control: 
    control: No user sessions are running outdated binaries.
    control: 
    control: No VM guests are running outdated hypervisor (qemu) binaries on this host.
==> target01: Importing base box 'bento/ubuntu-22.04'...
==> target01: Matching MAC address for NAT networking...
==> target01: Checking if box 'bento/ubuntu-22.04' version '202502.21.0' is up to date...
==> target01: Setting the name of the VM: atelier-03_target01_1742805598133_4894
==> target01: Fixed port collision for 22 => 2222. Now on port 2200.
==> target01: Clearing any previously set network interfaces...
==> target01: Preparing network interfaces based on configuration...
    target01: Adapter 1: nat
    target01: Adapter 2: hostonly
==> target01: Forwarding ports...
    target01: 22 (guest) => 2200 (host) (adapter 1)
==> target01: Running 'pre-boot' VM customizations...
==> target01: Booting VM...
==> target01: Waiting for machine to boot. This may take a few minutes...
    target01: SSH address: 127.0.0.1:2200
    target01: SSH username: vagrant
    target01: SSH auth method: private key
    target01: 
    target01: Vagrant insecure key detected. Vagrant will automatically replace
    target01: this with a newly generated keypair for better security.
    target01: 
    target01: Inserting generated public key within guest...
    target01: Removing insecure key from the guest if it's present...
    target01: Key inserted! Disconnecting and reconnecting using new SSH key...
==> target01: Machine booted and ready!
==> target01: Setting hostname...
==> target01: Configuring and enabling network interfaces...
==> target01: Mounting shared folders...
    target01: /home/ema/formation-ansible/atelier-03 => /vagrant
==> target02: Importing base box 'bento/ubuntu-22.04'...
[ema@testlab:atelier-03] $ vagrant ssh control
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-133-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Mon Mar 24 08:43:40 AM UTC 2025

  System load:           0.01
  Usage of /:            17.0% of 30.34GB
  Memory usage:          32%
  Swap usage:            0%
  Processes:             166
  Users logged in:       0
  IPv4 address for eth0: 10.0.2.15
  IPv6 address for eth0: fd00::a00:27ff:febb:5920


This system is built by the Bento project by Chef Software
More information can be found at https://github.com/chef/bento

Use of this system is acceptance of the OS vendor EULA and License Agreements.
vagrant@control:~$ type ansible
ansible is /usr/bin/ansible
vagrant@control:~$ sudo vim /etc/hosts
vagrant@control:~$ for HOST in target01 target02 target03; do ping -c 1 -q $HOST; done
PING target01 (192.168.56.20) 56(84) bytes of data.

--- target01 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.343/0.343/0.343/0.000 ms
PING target02 (192.168.56.30) 56(84) bytes of data.

--- target02 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.239/0.239/0.239/0.000 ms
PING target03 (192.168.56.40) 56(84) bytes of data.

--- target03 ping statistics ---
1 packets transmitted, 1 received, 0% packet loss, time 0ms
rtt min/avg/max/mdev = 0.232/0.232/0.232/0.000 ms
vagrant@control:~$ cat /etc/hosts
127.0.0.1 localhost
127.0.1.1 vagrant

# The following lines are desirable for IPv6 capable hosts
::1     ip6-localhost ip6-loopback
fe00::0 ip6-localnet
ff00::0 ip6-mcastprefix
ff02::1 ip6-allnodes
ff02::2 ip6-allrouters
127.0.2.1 control control

192.168.56.20  target01
192.168.56.30  target02
192.168.56.40  target03

vagrant@control:~$ ssh-keyscan -t rsa target01 target02 target03 >> ~/.ssh/known_hosts
# target03:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.11
# target01:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.11
# target02:22 SSH-2.0-OpenSSH_8.9p1 Ubuntu-3ubuntu0.11
vagrant@control:~$ ssh-keygen
Generating public/private rsa key pair.
Enter file in which to save the key (/home/vagrant/.ssh/id_rsa): 
Enter passphrase (empty for no passphrase): 
Enter same passphrase again: 
Your identification has been saved in /home/vagrant/.ssh/id_rsa
Your public key has been saved in /home/vagrant/.ssh/id_rsa.pub
The key fingerprint is:
SHA256:BiieDnUcexlLOvAH5DsuS1Mp+ow5oBR8OkpkcyrTq4A vagrant@control
The key's randomart image is:
+---[RSA 3072]----+
|  ..+ o          |
|   = B +         |
|. o X *          |
| O * * .         |
|+.@ =   S        |
|=X.+ . .         |
|E.*..            |
|=*.+             |
|+o+              |
+----[SHA256]-----+
vagrant@control:~$ ssh-copy-id vagrant@target01
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/home/vagrant/.ssh/id_rsa.pub"
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
vagrant@target01's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'vagrant@target01'"
and check to make sure that only the key(s) you wanted were added.

vagrant@control:~$ ssh-copy-id vagrant@target02
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/home/vagrant/.ssh/id_rsa.pub"
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
vagrant@target02's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'vagrant@target02'"
and check to make sure that only the key(s) you wanted were added.

vagrant@control:~$ ssh-copy-id vagrant@target03
/usr/bin/ssh-copy-id: INFO: Source of key(s) to be installed: "/home/vagrant/.ssh/id_rsa.pub"
/usr/bin/ssh-copy-id: INFO: attempting to log in with the new key(s), to filter out any that are already installed
/usr/bin/ssh-copy-id: INFO: 1 key(s) remain to be installed -- if you are prompted now it is to install the new keys
vagrant@target03's password: 

Number of key(s) added: 1

Now try logging into the machine, with:   "ssh 'vagrant@target03'"
and check to make sure that only the key(s) you wanted were added.

vagrant@control:~$ ssh vagrant@target01
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-133-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Mon Mar 24 08:45:04 AM UTC 2025

  System load:           0.0
  Usage of /:            15.1% of 30.34GB
  Memory usage:          23%
  Swap usage:            0%
  Processes:             157
  Users logged in:       0
  IPv4 address for eth0: 10.0.2.15
  IPv6 address for eth0: fd00::a00:27ff:febb:5920


This system is built by the Bento project by Chef Software
More information can be found at https://github.com/chef/bento

Use of this system is acceptance of the OS vendor EULA and License Agreements.
vagrant@target01:~$ exit
logout
Connection to target01 closed.
vagrant@control:~$ ssh vagrant@target02
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-133-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Mon Mar 24 08:45:12 AM UTC 2025

  System load:           0.01
  Usage of /:            15.1% of 30.34GB
  Memory usage:          23%
  Swap usage:            0%
  Processes:             156
  Users logged in:       0
  IPv4 address for eth0: 10.0.2.15
  IPv6 address for eth0: fd00::a00:27ff:febb:5920


This system is built by the Bento project by Chef Software
More information can be found at https://github.com/chef/bento

Use of this system is acceptance of the OS vendor EULA and License Agreements.
vagrant@target02:~$ exit
logout
Connection to target02 closed.
vagrant@control:~$ ssh vagrant@target03
Welcome to Ubuntu 22.04.5 LTS (GNU/Linux 5.15.0-133-generic x86_64)

 * Documentation:  https://help.ubuntu.com
 * Management:     https://landscape.canonical.com
 * Support:        https://ubuntu.com/pro

 System information as of Mon Mar 24 08:45:21 AM UTC 2025

  System load:           0.04
  Usage of /:            15.1% of 30.34GB
  Memory usage:          23%
  Swap usage:            0%
  Processes:             156
  Users logged in:       0
  IPv4 address for eth0: 10.0.2.15
  IPv6 address for eth0: fd00::a00:27ff:febb:5920


This system is built by the Bento project by Chef Software
More information can be found at https://github.com/chef/bento

Use of this system is acceptance of the OS vendor EULA and License Agreements.
vagrant@target03:~$ exit
logout
Connection to target03 closed.
vagrant@control:~$ 
vagrant@control:~$ ansible all -i target01,target02,target03 -m ping
target01 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
target03 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
target02 | SUCCESS => {
    "ansible_facts": {
        "discovered_interpreter_python": "/usr/bin/python3"
    },
    "changed": false,
    "ping": "pong"
}
vagrant@control:~$ exit
logout
Connection to 127.0.0.1 closed.
[ema@testlab:atelier-03] $ vagrant destroy -f
==> target03: Forcing shutdown of VM...
==> target03: Destroying VM and associated drives...
==> target02: Forcing shutdown of VM...
==> target02: Destroying VM and associated drives...
==> target01: Forcing shutdown of VM...
==> target01: Destroying VM and associated drives...
==> control: Forcing shutdown of VM...
==> control: Destroying VM and associated drives...
[ema@testlab:atelier-03] $ 
